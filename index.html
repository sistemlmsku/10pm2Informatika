<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMS SMK FAJAR - Kelas 10 PM 2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --text-color: #333;
            --text-light: #7f8c8d;
            --border-radius: 12px;
            --box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --gradient-primary: linear-gradient(135deg, #3498db, #2c3e50);
            --gradient-success: linear-gradient(135deg, #2ecc71, #27ae60);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: var(--text-color);
            line-height: 1.6;
        }

        body.dark-mode {
            background-color: #121212;
            color: #f5f5f5;
            --light-color: #1e1e1e;
            --text-color: #f5f5f5;
            --text-light: #b0b0b0;
        }

        /* Header Styles */
        header {
            background: var(--gradient-primary);
            box-shadow: var(--box-shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            color: white;
        }

        body.dark-mode header {
            background: linear-gradient(135deg, #2c3e50, #1a252f);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo i {
            font-size: 2.5rem;
            color: white;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            margin-bottom: 0.2rem;
            color: white;
            font-weight: 600;
        }

        .logo-text p {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .menu-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: white;
            cursor: pointer;
            display: none;
        }

        .main-menu {
            display: flex;
            gap: 1.5rem;
        }

        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            position: relative;
            padding: 0.5rem;
            color: rgba(255, 255, 255, 0.8);
            transition: var(--transition);
        }

        .menu-item.active {
            color: white;
            transform: translateY(-3px);
        }

        .menu-item i {
            font-size: 1.2rem;
            margin-bottom: 0.3rem;
        }

        .menu-item span {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .menu-item:hover {
            color: white;
            transform: translateY(-3px);
        }

        .tooltip {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--dark-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 100;
            box-shadow: var(--box-shadow);
        }

        .menu-item:hover .tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(5px);
        }

        /* Main Content Styles */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .section {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        body.dark-mode .section {
            background-color: var(--dark-color);
            border-color: #333;
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .section-title i {
            font-size: 1.2rem;
        }

        /* Absensi Section */
        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-color);
        }

        body.dark-mode label {
            color: #f5f5f5;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background-color: white;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        body.dark-mode input, 
        body.dark-mode select,
        body.dark-mode textarea {
            background-color: #333;
            color: white;
            border-color: #555;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        button {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius);
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            opacity: 0.9;
        }

        .status {
            padding: 0.8rem 1rem;
            border-radius: var(--border-radius);
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .status.success {
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--success-color);
            border-left: 4px solid var(--success-color);
        }

        .status.error {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger-color);
            border-left: 4px solid var(--danger-color);
        }

        /* Materi Section */
        .materi-content {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
            transition: var(--transition);
        }

        body.dark-mode .materi-content {
            border-bottom-color: #444;
        }

        .materi-content:hover {
            transform: translateY(-3px);
        }

        .materi-content h2 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        .materi-content p {
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .materi-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .action-buttons {
            display: flex;
            gap: 0.8rem;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border-radius: var(--border-radius);
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-secondary {
            background: var(--gradient-success);
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }

        body.dark-mode .btn-outline {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            padding: 0.5rem 0;
        }

        .checkbox-container input {
            width: auto;
            transform: scale(1.2);
        }
        
        .poin-info {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-light);
            font-style: italic;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 2rem auto;
            padding: 2.5rem;
            border-radius: var(--border-radius);
            max-width: 800px;
            position: relative;
            box-shadow: var(--box-shadow);
            animation: modalFadeIn 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        body.dark-mode .modal-content {
            background-color: #1e1e1e;
            border-color: #444;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--text-light);
            transition: var(--transition);
        }

        .close-modal:hover {
            color: var(--danger-color);
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            font-weight: 600;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .modal-body {
            line-height: 1.8;
        }

        .modal-body h3 {
            margin: 1.5rem 0 0.8rem;
            color: var(--primary-color);
            font-size: 1.3rem;
        }

        .modal-body h4 {
            margin: 1.2rem 0 0.6rem;
            font-size: 1.1rem;
            color: var(--secondary-color);
        }

        .modal-body ul, .modal-body ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .modal-body li {
            margin-bottom: 0.5rem;
        }
        
        /* Styling untuk kode */
        pre {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        body.dark-mode pre {
            background-color: #1a252f;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        body.dark-mode th, body.dark-mode td {
            border-color: #555;
        }
        
        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Soal Section */
        .token-input {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 1rem;
        }

        .token-input input {
            flex: 1;
        }

        .exam-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: rgba(52, 152, 219, 0.1);
            border-radius: var(--border-radius);
            font-weight: 500;
        }

        body.dark-mode .exam-info {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
        }

        .question {
            margin-bottom: 1.5rem;
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 1.2rem;
            font-size: 1.1rem;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.8rem;
        }

        .option {
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            background-color: white;
        }

        body.dark-mode .option {
            border-color: #555;
            background-color: #333;
        }

        .option:hover {
            background-color: rgba(52, 152, 219, 0.1);
            transform: translateX(5px);
        }

        body.dark-mode .option:hover {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .option.selected {
            background-color: rgba(52, 152, 219, 0.2);
            border-color: var(--primary-color);
            transform: translateX(5px);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .question-indicator {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .indicator-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background-color: #ddd;
            cursor: pointer;
            transition: var(--transition);
        }

        .indicator-dot.active {
            background-color: var(--primary-color);
            transform: scale(1.2);
        }

        /* Hasil Ujian Section */
        .result-container {
            text-align: center;
            padding: 2rem;
        }

        .result-title {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .score-display {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2.5rem 0;
            flex-wrap: wrap;
        }

        .score-box {
            background: var(--gradient-primary);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            min-width: 180px;
            color: white;
            transition: var(--transition);
            flex: 1;
            max-width: 220px;
        }

        .score-box:hover {
            transform: translateY(-5px);
        }

        body.dark-mode .score-box {
            background: linear-gradient(135deg, #2c3e50, #1a252f);
        }

        .score-label {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 0.5rem;
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
        }

        .chart-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin: 2.5rem 0;
            justify-content: center;
        }

        .chart-box {
            flex: 1;
            min-width: 320px;
            max-width: 450px;
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .chart-box:hover {
            transform: translateY(-5px);
        }

        body.dark-mode .chart-box {
            background-color: #333;
        }

        /* Sertifikat Section */
        .certificate-form {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .certificate-form input {
            flex: 1;
        }

        .share-options {
            display: flex;
            gap: 1.5rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .share-btn {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            box-shadow: var(--box-shadow);
        }

        .share-btn:hover {
            transform: translateY(-3px);
            opacity: 0.9;
        }

        .whatsapp-btn {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }

        .download-btn {
            background: var(--gradient-primary);
            color: white;
        }

        /* Progress Section */
        .progress-container {
            margin-bottom: 2.5rem;
            background-color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        body.dark-mode .progress-container {
            background-color: #333;
        }

        .progress-bar {
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            margin-bottom: 0.8rem;
            overflow: hidden;
        }

        body.dark-mode .progress-bar {
            background-color: #444;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            width: 0;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 500;
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: var(--box-shadow);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            max-width: 350px;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification.success {
            background: var(--gradient-success);
            color: white;
        }

        .notification.error {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .notification.info {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .notification i {
            font-size: 1.8rem;
        }

        .notification-content {
            flex: 1;
            font-weight: 500;
        }

        .close-notif {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0 0.5rem;
            transition: var(--transition);
        }

        .close-notif:hover {
            transform: scale(1.2);
        }

        /* Floating Action Buttons */
        .fab-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 999;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--box-shadow);
            cursor: pointer;
            transition: var(--transition);
        }

        .fab:hover {
            transform: scale(1.1) translateY(-5px);
        }

        .fab i {
            font-size: 1.5rem;
        }

        .fab-theme {
            background: var(--dark-color);
        }

        /* Tombol Spreadsheet */
        .spreadsheet-btn {
            background: linear-gradient(135deg, #0f9d58, #0b8043);
            color: white;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            box-shadow: var(--box-shadow);
            border: none;
            margin: 1.5rem auto;
        }
        
        .spreadsheet-btn:hover {
            transform: translateY(-3px);
            opacity: 0.9;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                align-items: flex-start;
            }

            .menu-toggle {
                display: block;
                position: absolute;
                top: 1.5rem;
                right: 1rem;
            }

            .main-menu {
                display: none;
                flex-direction: column;
                width: 100%;
                margin-top: 1rem;
                background-color: var(--primary-color);
                border-radius: var(--border-radius);
                padding: 1rem;
            }

            body.dark-mode .main-menu {
                background-color: var(--dark-color);
            }

            .main-menu.active {
                display: flex;
            }

            .menu-item {
                flex-direction: row;
                justify-content: flex-start;
                gap: 1rem;
                padding: 1rem 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            body.dark-mode .menu-item {
                border-bottom-color: #444;
            }

            .tooltip {
                display: none;
            }

            .chart-container {
                flex-direction: column;
            }

            .score-display {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .certificate-form {
                flex-direction: column;
            }
            
            .share-options {
                justify-content: center;
            }
            
            .score-box {
                max-width: 100%;
            }
        }

        /* Sertifikat Baru */
        .certificate-border {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            background: #fff;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        body.dark-mode .certificate-border {
            background: #2c3e50;
            border-color: #444;
        }

        .certificate-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .certificate-body {
            padding: 20px;
        }

        .certificate-footer {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
        }

        .signature {
            text-align: center;
            border-top: 1px solid #ccc;
            padding-top: 10px;
            width: 45%;
        }

        /* Form Spreadsheet */
        .spreadsheet-form {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
        }

        body.dark-mode .spreadsheet-form {
            background-color: #333;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Notification Area -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <div class="notification-content">Pesan notifikasi</div>
        <button class="close-notif">&times;</button>
    </div>
    
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-laptop-code"></i>
                <div class="logo-text">
                    <h1>LMS SMK FAJAR</h1>
                    <p>Bisnis Daring dan Pemasaran - Kelas 10 PM 2</p>
                </div>
            </div>
            
            <button class="menu-toggle" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav class="main-menu" id="mainMenu">
                <div class="menu-item active" onclick="navigateToSection('absensi')">
                    <i class="fas fa-calendar-check"></i>
                    <span>Absensi</span>
                    <span class="tooltip">Isi kehadiran harian</span>
                </div>
                <div class="menu-item" onclick="navigateToSection('materi')">
                    <i class="fas fa-book"></i>
                    <span>Materi</span>
                    <span class="tooltip">Pelajari materi pembelajaran</span>
                </div>
                <div class="menu-item" onclick="navigateToSection('token')">
                    <i class="fas fa-key"></i>
                    <span>Token</span>
                    <span class="tooltip">Masukkan token ujian</span>
                </div>
                <div class="menu-item" onclick="navigateToSection('soal')">
                    <i class="fas fa-file-alt"></i>
                    <span>Soal</span>
                    <span class="tooltip">Kerjakan latihan soal</span>
                </div>
                <div class="menu-item" onclick="navigateToSection('sertifikat')">
                    <i class="fas fa-award"></i>
                    <span>Sertifikat</span>
                    <span class="tooltip">Unduh sertifikat</span>
                </div>
            </nav>
        </div>
    </header>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Absensi Section -->
        <section id="absensi" class="section">
            <h2 class="section-title"><i class="fas fa-calendar-check"></i> Absensi Harian</h2>
            <div class="form-group">
                <label for="namaSiswa">Nama Lengkap</label>
                <input type="text" id="namaSiswa" placeholder="Masukkan nama lengkap" value="Nama Siswa">
            </div>
            <div class="form-group">
                <label for="emailSiswa">Email</label>
                <input type="email" id="emailSiswa" placeholder="Masukkan email aktif" value="siswa@smkfajar.sch.id">
            </div>
            <div class="form-group">
                <label for="absenStatus">Status Kehadiran</label>
                <select id="absenStatus">
                    <option value="">Pilih status kehadiran</option>
                    <option value="hadir" selected>Hadir</option>
                    <option value="izin">Izin</option>
                    <option value="sakit">Sakit</option>
                    <option value="alpa">Alpa</option>
                </select>
            </div>
            <button onclick="kirimAbsensi()">Kirim Absensi</button>
            <div id="statusAbsensi" class="status"></div>
        </section>
        
        <!-- Materi Section -->
        <section id="materi" class="section">
            <h2 class="section-title"><i class="fas fa-book"></i> Materi Pembelajaran</h2>
            
            <div class="materi-content" id="materi1">
                <h2>Materi 1: Pengantar Informatika</h2>
                <p>Informatika adalah disiplin ilmu yang mempelajari tentang pengolahan informasi dengan menggunakan komputer. Materi ini mencakup sejarah perkembangan komputer, konsep dasar pemrograman, dan aplikasi teknologi informasi dalam kehidupan sehari-hari.</p>
                
                <div class="materi-meta">
                    <div>
                        <i class="far fa-clock"></i> Durasi: <span id="durasiMateri1">0 menit 0 detik</span>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="openModal(1)">Baca Lengkap</button>
                        <button class="btn btn-outline" id="bookmarkMateri1" onclick="toggleBookmark('Materi1')">
                            <i class="far fa-bookmark"></i> Bookmark
                        </button>
                    </div>
                </div>
                
                <div class="checkbox-container">
                    <input type="checkbox" id="baca1" onchange="updateProgress()">
                    <label for="baca1">Saya telah membaca dan memahami materi ini</label>
                </div>
                
                <div class="poin-info">
                    <i class="fas fa-info-circle"></i> Poin membaca: <span id="poinMateri1">0</span>/10 (1 poin per menit, maks 10 poin)
                </div>
                
                <div class="form-group">
                    <label for="refleksi1">Refleksi Pembelajaran</label>
                    <textarea id="refleksi1" rows="3" placeholder="Tuliskan pemahaman dan refleksi Anda setelah mempelajari materi ini">Setelah mempelajari materi ini, saya memahami bahwa informatika bukan hanya tentang pemrograman tetapi mencakup berbagai aspek pengolahan informasi. Saya tertarik untuk mempelajari lebih dalam tentang sejarah perkembangan komputer dan aplikasinya dalam kehidupan modern.</textarea>
                    <button class="btn btn-secondary" onclick="kirimRefleksi(1)">Kirim Refleksi</button>
                    <div id="statusRefleksi1" class="status"></div>
                </div>
            </div>
            
            <div class="materi-content" id="materi2">
                <h2>Materi 2: Perangkat Keras dan Lunak</h2>
                <p>Materi ini membahas komponen-komponen perangkat keras komputer seperti CPU, RAM, penyimpanan, dan perangkat input/output. Juga mencakup pengenalan berbagai jenis perangkat lunak mulai dari sistem operasi hingga aplikasi produktivitas.</p>
                
                <div class="materi-meta">
                    <div>
                        <i class="far fa-clock"></i> Durasi: <span id="durasiMateri2">0 menit 0 detik</span>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="openModal(2)">Baca Lengkap</button>
                        <button class="btn btn-outline" id="bookmarkMateri2" onclick="toggleBookmark('Materi2')">
                            <i class="far fa-bookmark"></i> Bookmark
                        </button>
                    </div>
                </div>
                
                <div class="checkbox-container">
                    <input type="checkbox" id="baca2" onchange="updateProgress()">
                    <label for="baca2">Saya telah membaca dan memahami materi ini</label>
                </div>
                
                <div class="poin-info">
                    <i class="fas fa-info-circle"></i> Poin membaca: <span id="poinMateri2">0</span>/10 (1 poin per menit, maks 10 poin)
                </div>
                
                <div class="form-group">
                    <label for="refleksi2">Refleksi Pembelajaran</label>
                    <textarea id="refleksi2" rows="3" placeholder="Tuliskan pemahaman dan refleksi Anda setelah mempelajari materi ini">Materi ini membantu saya memahami perbedaan antara perangkat keras dan lunak. Saya menyadari pentingnya setiap komponen dalam sistem komputer dan bagaimana mereka bekerja sama. Saya ingin mempelajari lebih dalam tentang arsitektur komputer modern.</textarea>
                    <button class="btn btn-secondary" onclick="kirimRefleksi(2)">Kirim Refleksi</button>
                    <div id="statusRefleksi2" class="status"></div>
                </div>
            </div>
            
            <div class="materi-content" id="materi3">
                <h2>Materi 3: Jaringan Komputer</h2>
                <p>Pembelajaran tentang konsep dasar jaringan komputer, protokol jaringan, topologi jaringan, dan keamanan jaringan. Materi ini penting untuk memahami bagaimana komputer berkomunikasi satu sama lain dalam jaringan lokal maupun internet.</p>
                
                <div class="materi-meta">
                    <div>
                        <i class="far fa-clock"></i> Durasi: <span id="durasiMateri3">0 menit 0 detik</span>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="openModal(3)">Baca Lengkap</button>
                        <button class="btn btn-outline" id="bookmarkMateri3" onclick="toggleBookmark('Materi3')">
                            <i class="far fa-bookmark"></i> Bookmark
                        </button>
                    </div>
                </div>
                
                <div class="checkbox-container">
                    <input type="checkbox" id="baca3" onchange="updateProgress()">
                    <label for="baca3">Saya telah membaca dan memahami materi ini</label>
                </div>
                
                <div class="poin-info">
                    <i class="fas fa-info-circle"></i> Poin membaca: <span id="poinMateri3">0</span>/10 (1 poin per menit, maks 10 poin)
                </div>
                
                <div class="form-group">
                    <label for="refleksi3">Refleksi Pembelajaran</label>
                    <textarea id="refleksi3" rows="3" placeholder="Tuliskan pemahaman dan refleksi Anda setelah mempelajari materi ini">Jaringan komputer ternyata sangat kompleks namun menarik. Saya belajar tentang berbagai topologi jaringan dan bagaimana data ditransmisikan. Saya ingin memahami lebih dalam tentang protokol TCP/IP dan keamanan jaringan yang menjadi tantangan di era digital ini.</textarea>
                    <button class="btn btn-secondary" onclick="kirimRefleksi(3)">Kirim Refleksi</button>
                    <div id="statusRefleksi3" class="status"></div>
                </div>
            </div>
            
            <div class="materi-content" id="materi4">
                <h2>Materi 4: Etika Digital dan Keamanan</h2>
                <p>Materi ini membahas tentang etika dalam menggunakan teknologi digital, hak kekayaan intelektual, privasi data, dan praktik keamanan digital untuk melindungi diri dari ancaman dunia maya.</p>
                
                <div class="materi-meta">
                    <div>
                        <i class="far fa-clock"></i> Durasi: <span id="durasiMateri4">0 menit 0 detik</span>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="openModal(4)">Baca Lengkap</button>
                        <button class="btn btn-outline" id="bookmarkMateri4" onclick="toggleBookmark('Materi4')">
                            <i class="far fa-bookmark"></i> Bookmark
                        </button>
                    </div>
                </div>
                
                <div class="checkbox-container">
                    <input type="checkbox" id="baca4" onchange="updateProgress()">
                    <label for="baca4">Saya telah membaca dan memahami materi ini</label>
                </div>
                
                <div class="poin-info">
                    <i class="fas fa-info-circle"></i> Poin membaca: <span id="poinMateri4">0</span>/10 (1 poin per menit, maks 10 poin)
                </div>
                
                <div class="form-group">
                    <label for="refleksi4">Refleksi Pembelajaran</label>
                    <textarea id="refleksi4" rows="3" placeholder="Tuliskan pemahaman dan refleksi Anda setelah mempelajari materi ini">Etika digital adalah aspek penting yang sering diabaikan. Materi ini membuka mata saya tentang pentingnya privasi dan keamanan data. Saya akan lebih berhati-hati dalam beraktivitas online dan menerapkan praktik keamanan yang telah dipelajari untuk melindungi identitas digital saya.</textarea>
                    <button class="btn btn-secondary" onclick="kirimRefleksi(4)">Kirim Refleksi</button>
                    <div id="statusRefleksi4" class="status"></div>
                </div>
            </div>
        </section>
        
        <!-- Token Section -->
        <section id="token" class="section">
            <h2 class="section-title"><i class="fas fa-key"></i> Token Ujian</h2>
            <p>Masukkan token ujian yang diberikan oleh guru untuk memulai ujian akhir modul.</p>
            
            <div class="token-input">
                <input type="text" id="tokenUjian" placeholder="Masukkan token ujian" value="INF10UJIAN2025">
                <button onclick="verifikasiToken()">Verifikasi</button>
            </div>
            
            <div id="tokenStatus" class="status"></div>
        </section>
        
        <!-- Soal Section -->
        <section id="soal" class="section">
            <h2 class="section-title"><i class="fas fa-file-alt"></i> Ujian Akhir Modul</h2>
            
            <div id="soalUjian" style="display: none;">
                <div class="exam-info">
                    <div>
                        <i class="fas fa-clock"></i> Waktu: <span id="examTimer">00:00</span>
                    </div>
                    <div>
                        <i class="fas fa-question-circle"></i> Soal: <span id="currentQuestion">1</span>/25
                    </div>
                </div>
                
                <!-- Container untuk semua soal -->
                <div class="questions-container" id="questionsContainer">
                    <!-- Soal akan di-generate secara dinamis -->
                </div>
                
                <div class="question-indicator" id="questionIndicator">
                    <!-- Indikator akan di-generate secara dinamis -->
                </div>
                
                <button class="btn btn-primary" onclick="hitungNilai()" style="width: 100%; margin-top: 1rem;">
                    <i class="fas fa-check-circle"></i> Selesai & Hitung Nilai
                </button>
            </div>
            
            <div id="hasilUjian" style="display: none;">
                <div class="result-container">
                    <h2 class="result-title">Hasil Ujian Anda</h2>
                    <p>Anda telah menyelesaikan ujian akhir modul Dasar-dasar Informatika</p>
                    
                    <div class="score-display">
                        <div class="score-box">
                            <div class="score-label">Poin Materi</div>
                            <div class="score-value" id="poinMateriTotal">0</div>
                        </div>
                        <div class="score-box">
                            <div class="score-label">Jawaban Benar</div>
                            <div class="score-value" id="skor">0</div>
                        </div>
                        <div class="score-box">
                            <div class="score-label">Poin Ujian</div>
                            <div class="score-value" id="poinUjian">0</div>
                        </div>
                        <div class="score-box">
                            <div class="score-label">Nilai Akhir</div>
                            <div class="score-value" id="nilaiAkhir">0</div>
                        </div>
                        <div class="score-box">
                            <div class="score-label">Durasi Ujian</div>
                            <div class="score-value" id="durasiUjian">00:00</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-box">
                            <canvas id="hasilChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Tombol Kirim ke Spreadsheet -->
                    <button class="spreadsheet-btn" onclick="sendToSpreadsheet()">
                        <i class="fas fa-table"></i> Kirim Data ke Spreadsheet
                    </button>
                    
                    <p>Selamat! Anda telah menyelesaikan ujian. Silakan lanjutkan ke bagian sertifikat untuk mengunduh sertifikat penyelesaian.</p>
                </div>
            </div>
        </section>
        
        <!-- Sertifikat Section -->
        <section id="sertifikat" class="section">
            <h2 class="section-title"><i class="fas fa-award"></i> Sertifikat Penyelesaian</h2>
            <p>Setelah menyelesaikan semua materi dan ujian, Anda dapat mengunduh sertifikat penyelesaian modul pembelajaran ini.</p>
            
            <div class="certificate-form">
                <input type="text" id="namaSertifikat" placeholder="Masukkan nama untuk sertifikat" value="Nama Siswa">
                <button onclick="generateCertificate()"><i class="fas fa-download"></i> Unduh Sertifikat</button>
            </div>
            
            <div class="share-options">
                <button class="share-btn whatsapp-btn" onclick="shareToWhatsApp()">
                    <i class="fab fa-whatsapp"></i> Bagikan via WhatsApp
                </button>
                <button class="share-btn download-btn" onclick="generateCertificate()">
                    <i class="fas fa-file-pdf"></i> Unduh PDF
                </button>
                <button class="spreadsheet-btn" onclick="sendToSpreadsheet()">
                    <i class="fas fa-table"></i> Kirim ke Spreadsheet
                </button>
            </div>
            
            <div id="statusSertifikat" class="status"></div>
            
            <!-- Preview Sertifikat -->
            <div class="certificate-border">
                <div class="certificate-header">
                    <h2>SERTIFIKAT PENYELESAIAN</h2>
                    <h3>MODUL PEMBELAJARAN DASAR-DASAR INFORMATIKA</h3>
                </div>
                <div class="certificate-body">
                    <p>Diberikan kepada:</p>
                    <h1 id="previewNama">Nama Siswa</h1>
                    <p>Atas partisipasi dan penyelesaian modul pembelajaran dengan hasil sebagai berikut:</p>
                    
                    <div class="score-display">
                        <div class="score-box">
                            <div class="score-label">Durasi Belajar</div>
                            <div class="score-value" id="previewDurasi">0 menit</div>
                        </div>
                        <div class="score-box">
                            <div class="score-label">Nilai Akhir</div>
                            <div class="score-value" id="previewNilai">0</div>
                        </div>
                    </div>
                    
                    <p class="poin-info">Diterbitkan pada: <span id="previewTanggal"></span></p>
                </div>
                <div class="certificate-footer">
                    <div class="signature">
                        <p>Kepala Sekolah</p>
                        <p>Dr. H. Ahmad Suryana, M.Pd</p>
                    </div>
                    <div class="signature">
                        <p>Guru Mata Pelajaran</p>
                        <p>Soni Haji, S.Kom</p>
                    </div>
                </div>
            </div>
            
            <!-- Form Integrasi Spreadsheet -->
            <div class="spreadsheet-form">
                <h3>Integrasi dengan Google Spreadsheet</h3>
                <p>Untuk mengirim data ke Google Spreadsheet:</p>
                <ol>
                    <li>Buat script Google Apps baru di <a href="https://script.google.com/" target="_blank">script.google.com</a></li>
                    <li>Tempelkan kode berikut:</li>
                    <pre>
function doPost(e) {
  var sheet = SpreadsheetApp.openById('1QoFS738810fYCIG3Tm2kgR08ry4wtRQ_pzta0OI1xPY').getSheetByName('NamaSheet');
  var data = JSON.parse(e.postData.contents);
  
  sheet.appendRow([
    new Date(),
    data.nama,
    data.kelas,
    data.nilai,
    data.durasi_materi1,
    data.durasi_materi2,
    data.durasi_materi3,
    data.durasi_materi4
  ]);
  
  return ContentService.createTextOutput(JSON.stringify({result: 'success'})).setMimeType(ContentService.MimeType.JSON);
}</pre>
                    <li>Ganti <code>1QoFS738810fYCIG3Tm2kgR08ry4wtRQ_pzta0OI1xPY</code> dengan ID spreadsheet Anda</li>
                    <li>Ganti <code>NamaSheet</code> dengan nama sheet yang ingin digunakan</li>
                    <li>Deploy sebagai aplikasi web dengan izin eksekusi sebagai "Saya" dan akses "Siapa saja"</li>
                    <li>Tempelkan URL deployment di bawah:</li>
                </ol>
                
                <div class="form-group">
                    <label for="scriptUrl">URL Google Apps Script</label>
                    <input type="text" id="scriptUrl" placeholder="Tempelkan URL Google Apps Script Anda">
                </div>
            </div>
            
            <div class="progress-container">
                <h3>Progress Pembelajaran</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress">0%</div>
                </div>
                <div class="progress-text">
                    <span>Status Penyelesaian</span>
                    <span id="progressPercentage">0%</span>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-box">
                    <canvas id="materiChart"></canvas>
                </div>
                <div class="chart-box">
                    <canvas id="aktivitasChart"></canvas>
                </div>
                <div class="chart-box">
                    <canvas id="durasiChart"></canvas>
                </div>
            </div>
        </section>
    </div>
    
    <!-- Modal Materi Lengkap -->
    <div id="modalMateri" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 class="modal-title" id="modalTitle">Judul Materi</h2>
            <div class="modal-body" id="modalBody">
                <!-- Konten materi akan dimuat di sini -->
                <div id="modal-timer" style="text-align: right; margin-bottom: 10px; font-weight: 500;"></div>
            </div>
        </div>
    </div>
    
    <!-- Floating Action Buttons -->
    <div class="fab-container">
        <div class="fab fab-theme" onclick="toggleDarkMode()">
            <i class="fas fa-moon"></i>
        </div>
        <div class="fab" onclick="scrollToTop()">
            <i class="fas fa-arrow-up"></i>
        </div>
        <div class="fab" onclick="showHelp()">
            <i class="fas fa-question"></i>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Deklarasi variabel global
        let jsPDF = window.jspdf.jsPDF;
        let currentQuestion = 1;
        let totalQuestions = 25;
        let examStarted = false;
        let examTime = 0;
        let examTimer;
        let darkMode = false;
        let modalTimers = {};
        let modalStartTimes = {};
        let currentMateriId = null;
        let readingDurations = {
            materi1: 0,
            materi2: 0,
            materi3: 0,
            materi4: 0
        };
        
        // Poin dari aktivitas membaca per materi
        let poinMateri = {
            materi1: 0,
            materi2: 0,
            materi3: 0,
            materi4: 0
        };
        
        // Data siswa untuk sertifikat
        let studentData = {
            nama: "Nama Siswa",
            email: "siswa@smkfajar.sch.id",
            statusAbsensi: "hadir"
        };
        
        // Daftar soal ujian
        const soalList = [
            // Soal 1-25 (disingkat untuk kepraktisan)
            {
                pertanyaan: "Apa yang dimaksud dengan informatika?",
                opsi: [
                    "Disiplin ilmu yang mempelajari pengolahan informasi dengan komputer",
                    "Ilmu tentang perangkat keras komputer saja",
                    "Seni membuat program komputer",
                    "Teknologi untuk bermain game"
                ],
                jawaban: 0
            },
            // Soal 2
            {
                pertanyaan: "Komponen utama CPU adalah...",
                opsi: [
                    "ALU, CU, dan Register",
                    "RAM dan ROM",
                    "Hard disk dan SSD",
                    "Monitor dan keyboard"
                ],
                jawaban: 0
            },
            // Soal 3
            {
                pertanyaan: "Manakah yang BUKAN termasuk bahasa pemrograman?",
                opsi: [
                    "Python",
                    "Java",
                    "HTML",
                    "C++"
                ],
                jawaban: 2
            },
            // Soal 4
            {
                pertanyaan: "Apa fungsi utama dari RAM?",
                opsi: [
                    "Menyimpan data sementara saat program dijalankan",
                    "Menyimpan data secara permanen",
                    "Memproses instruksi program",
                    "Menampilkan output ke layar"
                ],
                jawaban: 0
            },
            // Soal 5
            {
                pertanyaan: "Protokol yang digunakan untuk mengirim email adalah...",
                opsi: [
                    "SMTP",
                    "HTTP",
                    "FTP",
                    "TCP"
                ],
                jawaban: 0
            },
            // Soal 6
            {
                pertanyaan: "Apa yang dimaksud dengan algoritma?",
                opsi: [
                    "Langkah-langkah logis untuk menyelesaikan masalah",
                    "Bahasa pemrograman tingkat tinggi",
                    "Perangkat keras komputer",
                    "Jenis database"
                ],
                jawaban: 0
            },
            // Soal 7
            {
                pertanyaan: "Manakah yang termasuk perangkat input?",
                opsi: [
                    "Keyboard",
                    "Monitor",
                    "Printer",
                    "Speaker"
                ],
                jawaban: 0
            },
            // Soal 8
            {
                pertanyaan: "Apa kepanjangan dari HTML?",
                opsi: [
                    "HyperText Markup Language",
                    "High-Level Machine Language",
                    "Hyper Transfer Markup Language",
                    "High-Tech Multimedia Language"
                ],
                jawaban: 0
            },
            // Soal 9
            {
                pertanyaan: "Apa fungsi utama dari sistem operasi?",
                opsi: [
                    "Mengelola sumber daya perangkat keras dan lunak",
                    "Membuat aplikasi perkantoran",
                    "Mengkompres file",
                    "Menghubungkan ke internet"
                ],
                jawaban: 0
            },
            // Soal 10
            {
                pertanyaan: "Manakah yang termasuk topologi jaringan?",
                opsi: [
                    "Star",
                    "Binary",
                    "Linear",
                    "Exponential"
                ],
                jawaban: 0
            },
            // Soal 11
            {
                pertanyaan: "Apa kepanjangan dari URL?",
                opsi: [
                    "Uniform Resource Locator",
                    "Universal Resource Link",
                    "Unified Resource Locator",
                    "Universal Reference Link"
                ],
                jawaban: 0
            },
            // Soal 12
            {
                pertanyaan: "Manakah yang BUKAN termasuk jenis malware?",
                opsi: [
                    "Firewall",
                    "Virus",
                    "Trojan",
                    "Ransomware"
                ],
                jawaban: 0
            },
            // Soal 13
            {
                pertanyaan: "Apa fungsi dari DNS?",
                opsi: [
                    "Menerjemahkan nama domain ke alamat IP",
                    "Mengenkripsi data yang dikirim melalui internet",
                    "Mengatur lalu lintas jaringan",
                    "Menyimpan halaman web"
                ],
                jawaban: 0
            },
            // Soal 14
            {
                pertanyaan: "Manakah yang termasuk basis data NoSQL?",
                opsi: [
                    "MongoDB",
                    "MySQL",
                    "PostgreSQL",
                    "SQLite"
                ],
                jawaban: 0
            },
            // Soal 15
            {
                pertanyaan: "Apa yang dimaksud dengan cloud computing?",
                opsi: [
                    "Penyediaan layanan komputasi melalui internet",
                    "Komputasi yang menggunakan awan sebagai server",
                    "Teknologi untuk membuat hujan buatan",
                    "Jaringan komputer berbasis satelit"
                ],
                jawaban: 0
            },
            // Soal 16
            {
                pertanyaan: "Manakah yang termasuk prinsip keamanan informasi?",
                opsi: [
                    "Kerahasiaan, Integritas, Ketersediaan",
                    "Kecepatan, Kualitas, Kuantitas",
                    "Kemudahan, Keterjangkauan, Keterbukaan",
                    "Kesederhanaan, Keefisienan, Keefektifan"
                ],
                jawaban: 0
            },
            // Soal 17
            {
                pertanyaan: "Apa yang dimaksud dengan VPN?",
                opsi: [
                    "Jaringan pribadi virtual",
                    "Protokol jaringan visual",
                    "Perangkat virtual pribadi",
                    "Proses verifikasi pribadi"
                ],
                jawaban: 0
            },
            // Soal 18
            {
                pertanyaan: "Manakah yang termasuk contoh sistem operasi open source?",
                opsi: [
                    "Linux",
                    "Windows",
                    "macOS",
                    "iOS"
                ],
                jawaban: 0
            },
            // Soal 19
            {
                pertanyaan: "Apa fungsi dari kompiler?",
                opsi: [
                    "Menerjemahkan kode sumber ke bahasa mesin",
                    "Mengeksekusi program secara langsung",
                    "Memeriksa kesalahan logika program",
                    "Mengoptimalkan kinerja komputer"
                ],
                jawaban: 0
            },
            // Soal 20
            {
                pertanyaan: "Manakah yang termasuk paradigma pemrograman?",
                opsi: [
                    "OOP (Object-Oriented Programming)",
                    "RDBMS (Relational Database Management System)",
                    "HTTP (HyperText Transfer Protocol)",
                    "CPU (Central Processing Unit)"
                ],
                jawaban: 0
            },
            // Soal 21
            {
                pertanyaan: "Apa yang dimaksud dengan API?",
                opsi: [
                    "Antarmuka untuk menghubungkan aplikasi",
                    "Alat pemrograman aplikasi",
                    "Protokol aplikasi internet",
                    "Bahasa pemrograman tingkat tinggi"
                ],
                jawaban: 0
            },
            // Soal 22
            {
                pertanyaan: "Manakah yang termasuk metode pengembangan perangkat lunak?",
                opsi: [
                    "Agile",
                    "Static",
                    "Dynamic",
                    "Linear"
                ],
                jawaban: 0
            },
            // Soal 23
            {
                pertanyaan: "Apa fungsi dari firewall?",
                opsi: [
                    "Melindungi jaringan dari akses tidak sah",
                    "Mempercepat koneksi internet",
                    "Menyimpan data cadangan",
                    "Mengkompres file"
                ],
                jawaban: 0
            },
            // Soal 24
            {
                pertanyaan: "Manakah yang termasuk contoh IDE?",
                opsi: [
                    "Visual Studio Code",
                    "Google Chrome",
                    "Microsoft Word",
                    "Adobe Photoshop"
                ],
                jawaban: 0
            },
            // Soal 25
            {
                pertanyaan: "Manakah yang BUKAN termasuk etika digital?",
                opsi: [
                    "Menghormati hak cipta",
                    "Menyebarkan informasi pribadi orang lain tanpa izin",
                    "Menggunakan password yang kuat",
                    "Menghindari penyebaran hoax"
                ],
                jawaban: 1
            }
        ];
        
        // Inisialisasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', function() {
            // Generate soal ujian
            generateSoalUjian();
            
            // Inisialisasi chart progress
            initCharts();
            
            // Set event listener untuk bookmark
            setupBookmarks();
            
            // Set event listener untuk notifikasi
            setupNotification();
            
            // Periksa preferensi dark mode
            checkDarkModePreference();
            
            // Tampilkan soal pertama
            showQuestion(1);
            
            // Set nama siswa dari input absensi ke input sertifikat
            const namaSiswa = document.getElementById('namaSiswa').value;
            document.getElementById('namaSertifikat').value = namaSiswa;
            studentData.nama = namaSiswa;
            
            // Update progress awal
            updateProgress();
            
            // Inisialisasi durasi materi dari localStorage
            ['materi1', 'materi2', 'materi3', 'materi4'].forEach(materiId => {
                const savedDuration = localStorage.getItem(`duration_${materiId}`);
                if (savedDuration) {
                    readingDurations[materiId] = parseInt(savedDuration);
                    updateDurationDisplay(materiId);
                    updatePoinDisplay(materiId);
                }
            });
            
            // Tambahkan event listener untuk update nama sertifikat saat nama absensi berubah
            document.getElementById('namaSiswa').addEventListener('input', function() {
                document.getElementById('namaSertifikat').value = this.value;
                studentData.nama = this.value;
                document.getElementById('previewNama').textContent = this.value;
            });
            
            // Update preview sertifikat
            updateCertificatePreview();
        });

        // Fungsi untuk generate sertifikat
        function generateCertificate() {
            try {
                const statusElement = document.getElementById('statusSertifikat');
                
                // Periksa apakah jsPDF tersedia
                if (typeof jsPDF === 'undefined') {
                    statusElement.className = 'status error';
                    statusElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> Error: Pustaka PDF tidak terdeteksi';
                    showNotification('Pustaka PDF tidak terdeteksi', 'error');
                    return;
                }
                
                // Gunakan nama dari input nama sertifikat
                let nama = document.getElementById('namaSertifikat').value || 
                          studentData.nama || 
                          'Peserta';
                
                // Gunakan nilai dari hasil ujian
                const nilai = document.getElementById('nilaiAkhir')?.textContent || '100';
                
                // Hitung durasi total
                const totalDurasi = Object.values(readingDurations).reduce((a, b) => a + b, 0);
                const menitTotal = Math.floor(totalDurasi / 60);
                const detikTotal = totalDurasi % 60;
                const durasiFormatted = `${menitTotal} menit ${detikTotal} detik`;
                
                // Tanggal hari ini
                const today = new Date();
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                const tanggal = today.toLocaleDateString('id-ID', options);
                
                // Buat PDF dengan ukuran landscape A4
                const doc = new jsPDF({
                    orientation: 'landscape',
                    unit: 'mm',
                    format: 'a4'
                });
                
                // Ukuran halaman
                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                
                // Background gradient profesional
                doc.setFillColor(240, 245, 249);
                doc.rect(0, 0, pageWidth, pageHeight, 'F');
                
                // Border dekoratif dengan efek modern
                doc.setDrawColor(52, 152, 219);
                doc.setLineWidth(1);
                doc.roundedRect(10, 10, pageWidth - 20, pageHeight - 20, 5, 5, 'S');
                
                // Inner border tipis
                doc.setDrawColor(200, 200, 200);
                doc.setLineWidth(0.5);
                doc.roundedRect(12, 12, pageWidth - 24, pageHeight - 24, 4, 4, 'S');
                
                // Header sekolah
                doc.setFont("helvetica", "bold");
                doc.setFontSize(18);
                doc.setTextColor(52, 152, 219);
                doc.text('SMK FAJAR', pageWidth / 2, 25, { align: 'center' });
                doc.setFontSize(14);
                doc.setTextColor(100, 100, 100);
                doc.text('TERAKREDITASI A', pageWidth / 2, 30, { align: 'center' });
                doc.setFontSize(10);
                doc.text('NPSN: 69860537 | Jl.AMD No. 39 Babakan Ciseeng Kab.Bogor', pageWidth / 2, 35, { align: 'center' });
                
                // JUDUL SERTIFIKAT
                doc.setFont("times", "bold");
                doc.setFontSize(28);
                doc.setTextColor(30, 30, 30);
                doc.text('SERTIFIKAT PENYELESAIAN', pageWidth / 2, 55, { align: 'center' });
                
                // Subjudul dengan gaya klasik
                doc.setFontSize(16);
                doc.setTextColor(100, 100, 100);
                doc.text('MODUL PEMBELAJARAN DASAR-DASAR INFORMATIKA', pageWidth / 2, 63, { align: 'center' });
                
                // Penerima sertifikat
                doc.setFontSize(20);
                doc.setTextColor(30, 30, 30);
                doc.setFont("helvetica", "bold");
                doc.text('Diberikan Kepada:', pageWidth / 2, 85, { align: 'center' });
                
                // Nama siswa (dari absensi)
                doc.setFontSize(32);
                doc.text(nama.toUpperCase(), pageWidth / 2, 100, { align: 'center' });
                
                // Detail siswa
                doc.setFontSize(14);
                doc.setTextColor(100, 100, 100);
                doc.text(`Jurusan: Bisnis Daring Dan Pemasaran (BDP) | Kelas: 10 PM 2`, pageWidth / 2, 110, { align: 'center' });
                
                // Detail pembelajaran
                const startY = 130;
                doc.setFontSize(12);
                
                // Durasi total
                doc.text(`Total Durasi Pembelajaran: ${durasiFormatted}`, pageWidth / 2, startY, { align: 'center' });
                
                // Durasi ujian
                const durasiUjian = document.getElementById('durasiUjian')?.textContent || '00:00';
                doc.text(`Durasi Ujian: ${durasiUjian}`, pageWidth / 2, startY + 8, { align: 'center' });
                
                // Nilai
                doc.text(`Nilai Akhir: ${nilai}`, pageWidth / 2, startY + 16, { align: 'center' });
                
                // Garis pembatas dekoratif
                doc.setDrawColor(200, 200, 200);
                doc.setLineWidth(0.5);
                doc.line(60, startY + 30, pageWidth - 60, startY + 30);
                
                // Tanda tangan
                const signatureY = startY + 50;
                doc.setFontSize(12);
                doc.text(`Kota Pendidikan, ${tanggal}`, pageWidth / 2, signatureY, { align: 'center' });
                
                // TTD Kepala Sekolah
                doc.text('Kepala Sekolah,', 100, signatureY + 40);
                doc.text('(https://script.google.com/macros/s/AKfycbzFcSL1QftEKgMKu4WcOiYB5WLhLqgK5mIhNa0gudHFterz717kUCCmFdD4Keqk86eA/exec)', 100, signatureY + 55);
                doc.setFont("helvetica", "bold");
                doc.text('Dr. H. Ahmad Suryana, M.Pd', 100, signatureY + 50);
                
                // TTD Guru Mapel
                doc.setFont("helvetica", "normal");
                doc.text('Guru Mata Pelajaran,', pageWidth - 100, signatureY + 40);
                doc.text('(https://script.google.com/macros/s/AKfycbzFcSL1QftEKgMKu4WcOiYB5WLhLqgK5mIhNa0gudHFterz717kUCCmFdD4Keqk86eA/exec)', pageWidth - 100, signatureY + 55);
                doc.setFont("helvetica", "bold");
                doc.text('Soni Haji, S.Kom', pageWidth - 100, signatureY + 50);
                
                // Cap sekolah
                doc.setFontSize(10);
                doc.setTextColor(150, 150, 150);
                doc.text(`Nomor Sertifikat: CERT-${today.getFullYear()}${(today.getMonth()+1).toString().padStart(2, '0')}${Math.floor(Math.random() * 1000).toString().padStart(3, '0')}`, pageWidth - 20, pageHeight - 15, { align: 'right' });
                
                // PERBAIKAN: Metode alternatif untuk download
                const safeName = nama.replace(/[^a-z0-9]/gi, '_').substring(0, 30);
                const fileName = `Sertifikat_${safeName}.pdf`;
                
                // Coba metode save
                try {
                    doc.save(fileName);
                } catch (e) {
                    console.log("Menggunakan metode alternatif untuk download", e);
                    
                    // Metode alternatif: buat blob dan unduh
                    const pdfBlob = doc.output('blob');
                    const url = URL.createObjectURL(pdfBlob);
                    
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = fileName;
                    document.body.appendChild(link);
                    link.click();
                    
                    // Hapus link setelah diunduh
                    setTimeout(() => {
                        document.body.removeChild(link);
                        URL.revokeObjectURL(url);
                    }, 100);
                }
                
                // Tampilkan notifikasi
                const statusEl = document.getElementById('statusSertifikat');
                if (statusEl) {
                    statusEl.className = 'status success';
                    statusEl.innerHTML = '<i class="fas fa-check-circle"></i> Sertifikat berhasil diunduh!';
                }
                
                showNotification('Sertifikat berhasil diunduh', 'success');
            } catch (error) {
                console.error("Error membuat sertifikat:", error);
                const statusElement = document.getElementById('statusSertifikat');
                if (statusElement) {
                    statusElement.className = 'status error';
                    statusElement.innerHTML = `<i class="fas fa-exclamation-circle"></i> Gagal membuat sertifikat: ${error.message}`;
                }
                showNotification(`Gagal membuat sertifikat: ${error.message}`, 'error');
            }
        }

        // Fungsi untuk update preview sertifikat
        function updateCertificatePreview() {
            const nama = document.getElementById('namaSertifikat').value || studentData.nama;
            const nilai = document.getElementById('nilaiAkhir')?.textContent || '0';
            
            // Hitung durasi total
            const totalDurasi = Object.values(readingDurations).reduce((a, b) => a + b, 0);
            const menitTotal = Math.floor(totalDurasi / 60);
            const detikTotal = totalDurasi % 60;
            const durasiFormatted = `${menitTotal} menit ${detikTotal} detik`;
            
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            const tanggal = today.toLocaleDateString('id-ID', options);
            
            document.getElementById('previewNama').textContent = nama;
            document.getElementById('previewNilai').textContent = nilai;
            document.getElementById('previewDurasi').textContent = durasiFormatted;
            document.getElementById('previewTanggal').textContent = tanggal;
        }

        // Fungsi untuk kirim absensi
        function kirimAbsensi() {
            const nama = document.getElementById('namaSiswa').value;
            const email = document.getElementById('emailSiswa').value;
            const status = document.getElementById('absenStatus').value;
            const statusElement = document.getElementById('statusAbsensi');
            
            if (!nama) {
                statusElement.className = 'status error';
                statusElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> Nama harus diisi!';
                return;
            }
            
            if (!email) {
                statusElement.className = 'status error';
                statusElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> Email harus diisi!';
                return;
            }
            
            if (!status) {
                statusElement.className = 'status error';
                statusElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> Pilih status kehadiran!';
                return;
            }
            
            // Simpan data siswa untuk sertifikat
            studentData = {
                nama: nama,
                email: email,
                statusAbsensi: status
            };
            
            // Update nama di input sertifikat
            document.getElementById('namaSertifikat').value = nama;
            document.getElementById('previewNama').textContent = nama;
            
            statusElement.className = 'status success';
            statusElement.innerHTML = `<i class="fas fa-check-circle"></i> Absensi berhasil dikirim! Status: ${status}`;
            
            showNotification('Absensi berhasil dikirim', 'success');
        }

        // Fungsi untuk generate soal ujian
        function generateSoalUjian() {
            const container = document.getElementById('questionsContainer');
            const indicator = document.getElementById('questionIndicator');
            
            container.innerHTML = '';
            indicator.innerHTML = '';
            
            soalList.forEach((soal, index) => {
                const questionNumber = index + 1;
                
                // Buat container soal
                const questionElement = document.createElement('div');
                questionElement.id = `soal${questionNumber}`;
                questionElement.className = 'question-container';
                if (questionNumber === 1) {
                    questionElement.classList.add('active');
                }
                
                // Buat opsi jawaban
                let optionsHTML = '';
                soal.opsi.forEach((opsi, opsiIndex) => {
                    const optionChar = String.fromCharCode(65 + opsiIndex);
                    optionsHTML += `
                        <div class="option" onclick="selectAnswer(this, 'q${questionNumber}', '${optionChar.toLowerCase()}')">
                            ${optionChar}. ${opsi}
                        </div>
                    `;
                });
                
                // Buat navigasi
                let navigationHTML = '';
                if (questionNumber === 1) {
                    navigationHTML = `
                        <button disabled>Sebelumnya</button>
                        <button onclick="showQuestion(${questionNumber + 1})">Selanjutnya</button>
                    `;
                } else if (questionNumber === totalQuestions) {
                    navigationHTML = `
                        <button onclick="showQuestion(${questionNumber - 1})">Sebelumnya</button>
                        <button onclick="hitungNilai()">Selesai</button>
                    `;
                } else {
                    navigationHTML = `
                        <button onclick="showQuestion(${questionNumber - 1})">Sebelumnya</button>
                        <button onclick="showQuestion(${questionNumber + 1})">Selanjutnya</button>
                    `;
                }
                
                // Tambahkan soal ke container
                questionElement.innerHTML = `
                    <div class="question">
                        <div class="question-text">${questionNumber}. ${soal.pertanyaan}</div>
                        <div class="options">
                            ${optionsHTML}
                        </div>
                        <input type="radio" name="q${questionNumber}" value="${String.fromCharCode(97 + soal.jawaban)}" style="display: none;">
                    </div>
                    <div class="navigation">
                        ${navigationHTML}
                    </div>
                `;
                
                container.appendChild(questionElement);
                
                // Buat indikator dot
                const dot = document.createElement('div');
                dot.className = 'indicator-dot' + (questionNumber === 1 ? ' active' : '');
                dot.onclick = () => showQuestion(questionNumber);
                indicator.appendChild(dot);
            });
        }

        // Fungsi untuk memperbarui tampilan durasi
        function updateDurationDisplay(materiId) {
            const minutes = Math.floor(readingDurations[materiId] / 60);
            const seconds = readingDurations[materiId] % 60;
            document.getElementById(`durasi${materiId.charAt(0).toUpperCase() + materiId.slice(1)}`)
                .textContent = `${minutes} menit ${seconds} detik`;
        }

        // Fungsi untuk memperbarui tampilan poin
        function updatePoinDisplay(materiId) {
            const menit = Math.floor(readingDurations[materiId] / 60);
            poinMateri[materiId] = Math.min(10, menit);
            document.getElementById(`poin${materiId.charAt(0).toUpperCase() + materiId.slice(1)}`)
                .textContent = poinMateri[materiId];
        }

        // Fungsi untuk buka modal materi
        function openModal(materiId) {
            const modal = document.getElementById('modalMateri');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const materiKey = 'materi' + materiId;
            
            // Set judul
            modalTitle.textContent = `Materi ${materiId}`;
            
            // Set konten materi (dalam aplikasi nyata, ini bisa diambil dari database)
            let content = '';
            switch(materiId) {
                case 1:
                    content = `
                        <h3>Pengantar Informatika</h3>
                        <p>Informatika adalah disiplin ilmu yang mempelajari tentang pengolahan informasi dengan menggunakan komputer. Informatika mencakup teori, eksperimen, dan rekayasa perangkat lunak yang menjadi dasar dalam perancangan dan penggunaan komputer. Ilmu ini tidak hanya fokus pada pemrograman tetapi juga pada bagaimana sistem komputasi bekerja dan bagaimana interaksinya dengan dunia nyata.</p>
                        
                        <h4>Sejarah Komputer</h4>
                        <p>Sejarah komputer dimulai dari alat hitung sederhana seperti sempoa, hingga mesin hitung mekanik yang ditemukan oleh Blaise Pascal dan Charles Babbage. Komputer pertama yang dapat diprogram adalah ENIAC (1945), yang menggunakan tabung vakum dan berukuran sangat besar. Perkembangan kemudian berlanjut dengan transistor, sirkuit terpadu, dan mikroprosesor yang membuat komputer semakin kecil dan kuat.</p>
                        <img src="https://via.placeholder.com/600x300?text=Diagram+Sejarah+Komputer" alt="Sejarah Komputer">
                        
                        <h4>Konsep Dasar Pemrograman</h4>
                        <p>Pemrograman adalah proses menulis kode untuk memberi instruksi kepada komputer. Kode ditulis dalam bahasa pemrograman yang memiliki sintaks dan semantik tertentu. Berikut contoh kode sederhana dalam Python:</p>
                        <pre><code class="python"># Program untuk menyapa pengguna
nama = input("Masukkan nama Anda: ")
print(f"Halo, {nama}! Selamat belajar informatika.")</code></pre>
                        
                        <h4>Peran Informatika di Masyarakat</h4>
                        <p>Informatika memiliki peran penting dalam berbagai bidang seperti pendidikan, kesehatan, bisnis, dan hiburan. Tabel berikut menunjukkan perkembangan teknologi informasi:</p>
                        <table>
                            <tr><th>Era</th><th>Perkembangan</th></tr>
                            <tr><td>1970-an</td><td>Komputer pribadi</td></tr>
                            <tr><td>1990-an</td><td>Internet</td></tr>
                            <tr><td>2000-an</td><td>Mobile Computing</td></tr>
                            <tr><td>2010-an</td><td>Cloud Computing dan AI</td></tr>
                        </table>
                    `;
                    break;
                case 2:
                    content = `
                        <h3>Perangkat Keras dan Lunak</h3>
                        <p>Materi ini membahas komponen-komponen perangkat keras komputer seperti CPU, RAM, penyimpanan, dan perangkat input/output. Juga mencakup pengenalan berbagai jenis perangkat lunak mulai dari sistem operasi hingga aplikasi produktivitas.</p>
                        
                        <h4>CPU (Central Processing Unit)</h4>
                        <p>CPU adalah otak komputer yang bertanggung jawab untuk mengeksekusi instruksi program. CPU modern memiliki beberapa inti prosesor yang memungkinkan pemrosesan paralel. Berikut adalah diagram alur kerja CPU:</p>
                        <img src="https://via.placeholder.com/600x300?text=Diagram+CPU" alt="Diagram CPU">
                        
                        <h4>Sistem Operasi</h4>
                        <p>Sistem operasi adalah perangkat lunak yang mengelola sumber daya perangkat keras dan menyediakan layanan untuk aplikasi perangkat lunak. Contoh sistem operasi termasuk Windows, macOS, dan Linux. Berikut contoh kode Python untuk mengecek sistem operasi:</p>
                        <pre><code class="python">import platform

# Mendapatkan informasi sistem operasi
sistem = platform.system()
versi = platform.release()

print(f"Sistem operasi: {sistem}")
print(f"Versi: {versi}")</code></pre>
                    `;
                    break;
                case 3:
                    content = `
                        <h3>Jaringan Komputer</h3>
                        <p>Pembelajaran tentang konsep dasar jaringan komputer, protokol jaringan, topologi jaringan, dan keamanan jaringan. Materi ini penting untuk memahami bagaimana komputer berkomunikasi satu sama lain dalam jaringan lokal maupun internet.</p>
                        
                        <h4>Topologi Jaringan</h4>
                        <p>Topologi jaringan adalah susunan atau struktur jaringan komputer. Jenis topologi termasuk bus, star, ring, dan mesh. Berikut adalah diagram topologi jaringan:</p>
                        <img src="https://via.placeholder.com/600x300?text=Topologi+Jaringan" alt="Topologi Jaringan">
                        
                        <h4>Protokol Jaringan</h4>
                        <p>Protokol jaringan adalah aturan yang mengatur komunikasi antara perangkat dalam jaringan. TCP/IP adalah protokol utama yang digunakan di internet. Berikut contoh kode Python untuk membuat koneksi TCP sederhana:</p>
                        <pre><code class="python">import socket

# Membuat socket TCP
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_address = ('localhost', 8080)
server_socket.bind(server_address)
server_socket.listen(1)

print("Menunggu koneksi...")
connection, client_address = server_socket.accept()
print(f"Terhubung dengan {client_address}")</code></pre>
                    `;
                    break;
                case 4:
                    content = `
                        <h3>Etika Digital dan Keamanan</h3>
                        <p>Materi ini membahas tentang etika dalam menggunakan teknologi digital, hak kekayaan intelektual, privasi data, dan praktik keamanan digital untuk melindungi diri dari ancaman dunia maya.</p>
                        
                        <h4>Privasi Data</h4>
                        <p>Privasi data adalah hak individu untuk mengendalikan bagaimana informasi pribadi mereka dikumpulkan, digunakan, dan dibagikan. Berikut adalah diagram alur perlindungan data:</p>
                        <img src="https://via.placeholder.com/600x300?text=Perlindungan+Data" alt="Perlindungan Data">
                        
                        <h4>Keamanan Digital</h4>
                        <p>Keamanan digital melibatkan praktik untuk melindungi sistem, jaringan, dan data dari serangan digital. Ini termasuk penggunaan password yang kuat, otentikasi dua faktor, dan enkripsi. Berikut contoh kode Python untuk membuat password yang aman:</p>
                        <pre><code class="python">import secrets
import string

def generate_password(length=12):
    # Karakter yang akan digunakan
    characters = string.ascii_letters + string.digits + string.punctuation
    
    # Membuat password acak
    password = ''.join(secrets.choice(characters) for i in range(length))
    
    return password

# Generate password 16 karakter
password = generate_password(16)
print(f"Password aman: {password}")</code></pre>
                    `;
                    break;
            }
            
            modalBody.innerHTML = `<div id="modal-timer" style="text-align: right; margin-bottom: 10px; font-weight: 500;"></div>${content}`;
            modal.style.display = 'block';
            
            // Mulai timer untuk materi ini
            startReadingTimer(materiId);
        }

        // Fungsi untuk mulai timer membaca
        function startReadingTimer(materiId) {
            const materiKey = 'materi' + materiId;
            
            // Hentikan timer sebelumnya jika ada
            if (modalTimers[materiKey]) {
                clearInterval(modalTimers[materiKey]);
            }
            
            // Catat waktu mulai
            modalStartTimes[materiKey] = new Date().getTime();
            
            // Mulai timer baru
            modalTimers[materiKey] = setInterval(() => {
                const currentTime = new Date().getTime();
                const elapsedSeconds = Math.floor((currentTime - modalStartTimes[materiKey]) / 1000);
                const totalSeconds = readingDurations[materiKey] + elapsedSeconds;
                
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;
                
                // Update tampilan timer di modal
                const timerElement = document.getElementById('modal-timer');
                if (timerElement) {
                    timerElement.textContent = `Waktu membaca: ${minutes} menit ${seconds} detik`;
                }
            }, 1000);
        }

        // Fungsi untuk tutup modal
        function closeModal() {
            document.getElementById('modalMateri').style.display = 'none';
            
            // Hentikan semua timer dan simpan durasi
            Object.keys(modalTimers).forEach(materiKey => {
                clearInterval(modalTimers[materiKey]);
                delete modalTimers[materiKey];
                
                const endTime = new Date().getTime();
                const elapsedSeconds = Math.floor((endTime - modalStartTimes[materiKey]) / 1000);
                readingDurations[materiKey] += elapsedSeconds;
                
                // Simpan ke localStorage
                localStorage.setItem(`duration_${materiKey}`, readingDurations[materiKey]);
                
                // Update tampilan
                updateDurationDisplay(materiKey);
                updatePoinDisplay(materiKey);
                updateProgress();
                updateCertificatePreview();
            });
        }

        // Fungsi untuk navigasi antar section
        function navigateToSection(sectionId) {
            // Sembunyikan semua section
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Tampilkan section yang dipilih
            document.getElementById(sectionId).style.display = 'block';
            
            // Update menu aktif
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.querySelector(`.menu-item[onclick="navigateToSection('${sectionId}')"]`).classList.add('active');
            
            // Scroll ke section
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }

        // Fungsi untuk toggle menu mobile
        function toggleMenu() {
            const menu = document.getElementById('mainMenu');
            menu.classList.toggle('active');
        }

        // Fungsi untuk update progress pembelajaran
        function updateProgress() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            const progress = (checkboxes.length / 4) * 100;
            
            document.getElementById('progress').style.width = `${progress}%`;
            document.getElementById('progress').textContent = `${progress}%`;
            document.getElementById('progressPercentage').textContent = `${progress}%`;
            
            // Update chart aktivitas
            updateProgressChart(
                checkboxes.length,
                4 - checkboxes.length,
                document.getElementById('hasilUjian').style.display !== 'none'
            );
        }

        // Fungsi untuk inisialisasi chart
        function initCharts() {
            // Chart hasil ujian
            const hasilCtx = document.getElementById('hasilChart').getContext('2d');
            window.hasilChart = new Chart(hasilCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Benar', 'Salah'],
                    datasets: [{
                        data: [0, 25],
                        backgroundColor: ['#2ecc71', '#e74c3c']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Hasil Ujian'
                        }
                    }
                }
            });
            
            // Chart materi
            const materiCtx = document.getElementById('materiChart').getContext('2d');
            window.materiChart = new Chart(materiCtx, {
                type: 'bar',
                data: {
                    labels: ['Materi 1', 'Materi 2', 'Materi 3', 'Materi 4'],
                    datasets: [{
                        label: 'Poin Pembelajaran',
                        data: [0, 0, 0, 0],
                        backgroundColor: '#3498db'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Poin Pembelajaran per Materi'
                        }
                    }
                }
            });
            
            // Chart aktivitas
            const aktivitasCtx = document.getElementById('aktivitasChart').getContext('2d');
            window.aktivitasChart = new Chart(aktivitasCtx, {
                type: 'pie',
                data: {
                    labels: ['Selesai', 'Belum Selesai'],
                    datasets: [{
                        data: [0, 4],
                        backgroundColor: ['#2ecc71', '#e74c3c']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Status Penyelesaian Materi'
                        }
                    }
                }
            });
            
            // Chart durasi
            const durasiCtx = document.getElementById('durasiChart').getContext('2d');
            window.durasiChart = new Chart(durasiCtx, {
                type: 'line',
                data: {
                    labels: ['Materi 1', 'Materi 2', 'Materi 3', 'Materi 4'],
                    datasets: [{
                        label: 'Durasi Belajar (menit)',
                        data: [0, 0, 0, 0],
                        backgroundColor: 'rgba(52, 152, 219, 0.2)',
                        borderColor: '#3498db',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Durasi Belajar per Materi'
                        }
                    }
                }
            });
        }

        // Fungsi untuk update chart hasil ujian
        function updateResultChart(correct, incorrect) {
            window.hasilChart.data.datasets[0].data = [correct, incorrect];
            window.hasilChart.update();
        }

        // Fungsi untuk update chart progress
        function updateProgressChart(completed, remaining, examCompleted) {
            window.materiChart.data.datasets[0].data = [
                poinMateri.materi1,
                poinMateri.materi2,
                poinMateri.materi3,
                poinMateri.materi4
            ];
            window.materiChart.update();
            
            window.aktivitasChart.data.datasets[0].data = [completed, remaining];
            window.aktivitasChart.update();
            
            window.durasiChart.data.datasets[0].data = [
                Math.floor(readingDurations.materi1 / 60),
                Math.floor(readingDurations.materi2 / 60),
                Math.floor(readingDurations.materi3 / 60),
                Math.floor(readingDurations.materi4 / 60)
            ];
            window.durasiChart.update();
        }

        // Fungsi untuk toggle dark mode
        function toggleDarkMode() {
            darkMode = !darkMode;
            document.body.classList.toggle('dark-mode', darkMode);
            localStorage.setItem('darkMode', darkMode);
            
            // Update icon
            const themeIcon = document.querySelector('.fab-theme i');
            themeIcon.className = darkMode ? 'fas fa-sun' : 'fas fa-moon';
            
            showNotification(`Mode ${darkMode ? 'gelap' : 'terang'} diaktifkan`, 'info');
        }

        // Fungsi untuk cek preferensi dark mode
        function checkDarkModePreference() {
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            if (savedDarkMode) {
                document.body.classList.add('dark-mode');
                darkMode = true;
                
                // Update icon
                const themeIcon = document.querySelector('.fab-theme i');
                themeIcon.className = 'fas fa-sun';
            }
        }

        // Fungsi untuk scroll ke atas
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Fungsi untuk tampilkan bantuan
        function showHelp() {
            alert("Bantuan LMS:\n\n1. Absensi: Isi kehadiran harian\n2. Materi: Pelajari materi pembelajaran\n3. Token: Masukkan token untuk ujian\n4. Soal: Kerjakan soal ujian\n5. Sertifikat: Unduh sertifikat setelah selesai");
        }

        // Fungsi untuk setup notifikasi
        function setupNotification() {
            document.querySelector('.close-notif').addEventListener('click', function() {
                document.getElementById('notification').classList.remove('show');
            });
        }

        // Fungsi untuk tampilkan notifikasi
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.querySelector('.notification-content').textContent = message;
            notification.className = `notification ${type} show`;
            
            // Sembunyikan notifikasi setelah 5 detik
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        // Fungsi untuk setup bookmark
        function setupBookmarks() {
            // Cek bookmark dari localStorage
            for (let i = 1; i <= 4; i++) {
                const isBookmarked = localStorage.getItem(`bookmarkMateri${i}`) === 'true';
                if (isBookmarked) {
                    const button = document.getElementById(`bookmarkMateri${i}`);
                    button.classList.add('bookmarked');
                    button.innerHTML = '<i class="fas fa-bookmark"></i> Bookmarked';
                }
            }
        }

        // Fungsi untuk kirim data ke Google Spreadsheet
        function sendToSpreadsheet() {
            try {
                const scriptUrl = document.getElementById('scriptUrl').value;
                
                if (!scriptUrl) {
                   const scriptUrl = "https://script.google.com/macros/s/AKfycbzFcSL1QftEKgMKu4WcOiYB5WLhLqgK5mIhNa0gudHFterz717kUCCmFdD4Keqk86eA/exec";
                    return;
                }
                
                // Kumpulkan data yang diperlukan
                const nama = document.getElementById('namaSiswa').value || 'Nama Siswa';
                const kelas = "10 PM 2";
                const nilai = document.getElementById('nilaiAkhir')?.textContent || 0;
                
                // Buat payload data
                const data = {
                    nama: nama,
                    kelas: kelas,
                    nilai: nilai,
                    durasi_materi1: readingDurations.materi1,
                    durasi_materi2: readingDurations.materi2,
                    durasi_materi3: readingDurations.materi3,
                    durasi_materi4: readingDurations.materi4
                };
                
                // Kirim data ke Google Apps Script
                fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(result => {
                    if (result.result === 'success') {
                        showNotification('Data berhasil dikirim ke spreadsheet!', 'success');
                    } else {
                        showNotification('Gagal mengirim data ke spreadsheet', 'error');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotification('Gagal mengirim data ke spreadsheet', 'error');
                });
                
            } catch (error) {
                console.error("Error mengirim ke spreadsheet:", error);
                showNotification(`Gagal mengirim data: ${error.message}`, 'error');
            }
        }

        // Fungsi untuk verifikasi token
        function verifikasiToken() {
            const token = document.getElementById('tokenUjian').value;
            const statusElement = document.getElementById('tokenStatus');
            
            if (token === "INF10UJIAN2025") {
                statusElement.className = 'status success';
                statusElement.innerHTML = '<i class="fas fa-check-circle"></i> Token valid! Ujian dimulai.';
                
                // Tampilkan soal
                document.getElementById('soalUjian').style.display = 'block';
                
                // Mulai timer ujian
                startExamTimer();
                
                // Scroll ke soal
                document.getElementById('soal').scrollIntoView({ behavior: 'smooth' });
            } else {
                statusElement.className = 'status error';
                statusElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> Token tidak valid. Silakan coba lagi.';
            }
        }

        // Fungsi untuk memulai timer ujian
        function startExamTimer() {
            if (!examStarted) {
                examStarted = true;
                examTimer = setInterval(() => {
                    examTime++;
                    const minutes = Math.floor(examTime / 60);
                    const seconds = examTime % 60;
                    document.getElementById('examTimer').textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }
        }

        // Fungsi untuk kirim refleksi
        function kirimRefleksi(materiId) {
            const refleksi = document.getElementById(`refleksi${materiId}`).value;
            const statusElement = document.getElementById(`statusRefleksi${materiId}`);
            
            if (!refleksi) {
                statusElement.className = 'status error';
                statusElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> Refleksi harus diisi!';
                return;
            }
            
            statusElement.className = 'status success';
            statusElement.innerHTML = '<i class="fas fa-check-circle"></i> Refleksi berhasil dikirim!';
            
            showNotification(`Refleksi Materi ${materiId} berhasil dikirim`, 'success');
        }

        // Fungsi untuk toggle bookmark
        function toggleBookmark(materiId) {
            const button = document.getElementById(`bookmark${materiId}`);
            const isBookmarked = button.classList.contains('bookmarked');
            
            if (isBookmarked) {
                button.classList.remove('bookmarked');
                button.innerHTML = '<i class="far fa-bookmark"></i> Bookmark';
                localStorage.setItem(`bookmarkMateri${materiId.substring(6)}`, 'false');
                showNotification(`Bookmark Materi ${materiId.substring(6)} dihapus`, 'info');
            } else {
                button.classList.add('bookmarked');
                button.innerHTML = '<i class="fas fa-bookmark"></i> Bookmarked';
                localStorage.setItem(`bookmarkMateri${materiId.substring(6)}`, 'true');
                showNotification(`Bookmark Materi ${materiId.substring(6)} ditambahkan`, 'success');
            }
        }

        // Fungsi untuk menghitung nilai
        function hitungNilai() {
            // Hentikan timer ujian
            clearInterval(examTimer);
            
            // Format durasi ujian
            const minutes = Math.floor(examTime / 60);
            const seconds = examTime % 60;
            const durasiFormatted = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('durasiUjian').textContent = durasiFormatted;
            
            // Hitung jawaban benar
            let score = 0;
            
            for (let i = 1; i <= totalQuestions; i++) {
                const selectedAnswer = document.querySelector(`input[name="q${i}"]:checked`);
                const correctAnswer = soalList[i-1].jawaban;
                const correctAnswerChar = String.fromCharCode(97 + correctAnswer);
                
                if (selectedAnswer && selectedAnswer.value === correctAnswerChar) {
                    score++;
                }
            }
            
            // Hitung poin dari aktivitas membaca
            const poinAktivitas = Object.values(poinMateri).reduce((a, b) => a + b, 0);
            
            // Hitung poin ujian (60 poin maksimal)
            const poinUjian = (score / totalQuestions) * 60;
            
            // Total nilai
            const nilai = poinAktivitas + poinUjian;
            
            // Tampilkan hasil
            document.getElementById('soalUjian').style.display = 'none';
            document.getElementById('hasilUjian').style.display = 'block';
            
            document.getElementById('skor').textContent = score;
            document.getElementById('poinMateriTotal').textContent = poinAktivitas;
            document.getElementById('poinUjian').textContent = poinUjian.toFixed(1);
            document.getElementById('nilaiAkhir').textContent = nilai.toFixed(1);
            
            // Update chart hasil
            updateResultChart(score, totalQuestions - score);
            
            // Update progress
            updateProgress();
            updateCertificatePreview();
            
            // Scroll ke hasil
            document.getElementById('hasilUjian').scrollIntoView({ behavior: 'smooth' });
            
            // Tampilkan notifikasi
            showNotification(`Ujian selesai! Nilai Anda: ${nilai.toFixed(1)}`, 'success');
        }

        // Fungsi untuk animasi angka
        function animateValue(id, start, end, duration) {
            const element = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                element.textContent = value;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Fungsi untuk memilih jawaban
        function selectAnswer(element, questionId, answer) {
            // Hapus class 'selected' dari semua opsi
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Tambahkan class 'selected' ke opsi yang dipilih
            element.classList.add('selected');
            
            // Set radio button yang sesuai
            const radio = document.querySelector(`input[name="${questionId}"][value="${answer}"]`);
            if (radio) {
                radio.checked = true;
            }
        }

        // Fungsi untuk menampilkan soal tertentu
        function showQuestion(questionNumber) {
            // Sembunyikan semua soal
            document.querySelectorAll('.question-container').forEach(q => {
                q.classList.remove('active');
            });
            
            // Tampilkan soal yang dipilih
            document.getElementById(`soal${questionNumber}`).classList.add('active');
            
            // Update indikator
            const dots = document.querySelectorAll('.indicator-dot');
            dots.forEach((dot, index) => {
                if (index === questionNumber - 1) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // Update nomor soal
            document.getElementById('currentQuestion').textContent = questionNumber;
            currentQuestion = questionNumber;
        }

        // Fungsi untuk berbagi hasil ke WhatsApp
        function shareToWhatsApp() {
            // Gunakan nama dari input nama sertifikat atau input nama siswa
            let nama = document.getElementById('namaSertifikat').value || 
                      studentData.nama || 
                      'Saya';
            
            // Gunakan nilai dari hasil ujian
            const nilai = document.getElementById('nilaiAkhir')?.textContent || '100';
            
            // Hitung durasi total
            const totalDurasi = Object.values(readingDurations).reduce((a, b) => a + b, 0);
            const menitTotal = Math.floor(totalDurasi / 60);
            const detikTotal = totalDurasi % 60;
            const durasiFormatted = `${menitTotal} menit ${detikTotal} detik`;
            
            // Format pesan profesional dengan emoji
            const message = ` *SERTIFIKAT PENYELESAIAN PEMBELAJARAN* \n\n` +
                           ` *Nama:* ${nama}\n` +
                           ` *Kelas:* 10 PM 2\n` +
                           ` *Jurusan:* Bisnis Daring Dan Pemasaran\n\n` +
                           ` *Total Durasi Pembelajaran:* ${durasiFormatted}\n` +
                           ` *Nilai Akhir:* ${nilai}\n\n` +
                           `Saya dengan bangga menyelesaikan modul pembelajaran Dasar-dasar Informatika dengan baik. Terima kasih atas bimbingannya.\n\n` +
                           `*SMK FAJAR*\n"Menuju Generasi Digital yang Berkarakter"`;
            
            const encodedMessage = encodeURIComponent(message);
            
            // URL WhatsApp dengan pesan
            const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
            
            // Buka jendela baru untuk WhatsApp
            window.open(whatsappUrl, '_blank');
            
            // Tampilkan notifikasi
            showNotification('Membuka WhatsApp untuk berbagi', 'success');
        }
    </script>
</body>
</html>

